{"openapi":"3.0.0","info":{"title":"Pets Services API","version":"1.0.0"},"paths":{"/absences":{"post":{"tags":["absence"],"security":[{"bearerAuth":[]}],"description":"User add a new absence","requestBody":{"$ref":"#/components/requestBodies/AddAbsence"},"responses":{"201":{"$ref":"#/components/responses/AbsenceAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Server error"}}},"get":{"tags":["absence"],"security":[{"bearerAuth":[]}],"description":"Get absences of a user","responses":{"400":{"$ref":"#/components/responses/UserNotRegistered"},"409":{"$ref":"#/components/responses/UserAlreadyExist"},"500":{"description":"Server error"}}}},"/absences/{id}":{"delete":{"tags":["absence"],"security":[{"bearerAuth":[]}],"description":"User delete one of his absences","parameters":[{"name":"id","description":"Absence id","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/AbsenceDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Server error"}}}},"/users":{"post":{"tags":["user"],"description":"Create new user and return JWT for user identification","requestBody":{"$ref":"#/components/requestBodies/AddUser"},"responses":{"201":{"$ref":"#/components/responses/UserRegistered"},"400":{"$ref":"#/components/responses/UserNotRegistered"},"409":{"$ref":"#/components/responses/UserAlreadyExist"},"500":{"description":"Server error"}}},"get":{"tags":["user"],"description":"Get users who have specific data","security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/UsersAreFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdministrator"},"500":{"description":"Server error"}}}},"/users/actions/login":{"post":{"tags":["user"],"description":"User login and return JWT for user identification","requestBody":{"description":"Email and password for user connection","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"201":{"$ref":"#/components/responses/LoginAccepted"},"401":{"$ref":"#/components/responses/LoginRejected"},"500":{"description":"Server error"}}}},"/users/{id}":{"put":{"tags":["user"],"security":[{"bearerAuth":[]}],"description":"Update data of a specific user","parameters":[{"name":"id","description":"User id","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"$ref":"#/components/requestBodies/UpdateUser"},"responses":{"200":{"$ref":"#/components/responses/UserUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/UserDoesNotHaveAcces"},"500":{"description":"Server error"}}}}},"components":{"responses":{"AbsenceAdded":{"description":"User Absence added"},"AbsenceDeleted":{"description":"User Absence deleted"},"AbsencesReturned":{"description":"The absences are returned"},"UserRegistered":{"description":"The user is registered and received his jwt"},"UserAlreadyExist":{"description":"The user already exists"},"UserNotRegistered":{"description":"Invalid inputs"},"LoginAccepted":{"description":"The user is connected and recieved jwt"},"LoginRejected":{"description":"The user is not connected because of bad email/password"},"UserUpdated":{"description":"The user is updated"},"UserDoesNotHaveAcces":{"description":"The user does not have access"},"UsersAreFound":{"description":"The users are returned"},"UserAreNotFound":{"description":"Thee users are not obtained"},"mustBeAdministrator":{"description":"The requested action can only be performed by an administrator"},"ErrorJWT":{"description":"JWT is not valid"},"MissingJWT":{"description":"JWT is not present"}},"requestBodies":{"AddAbsence":{"content":{"application/json":{"schema":{"type":"object","properties":{"date":{"type":"string"}},"required":["date"]}}}},"AddUser":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"phone":{"type":"string"},"locality":{"type":"string"},"postalCode":{"type":"integer"},"streetNumber":{"type":"string"},"streetName":{"type":"string"},"country":{"type":"string"},"customer":{"type":"object","properties":{"searchWalker":{"type":"boolean"},"searchHost":{"type":"boolean"}},"required":["searchWalker","searchHost"]},"supplier":{"type":"object","properties":{"isHost":{"type":"boolean"},"isAnimalWalker":{"type":"boolean"}},"required":["isHost","isAnimalWalker"]}},"required":["email","password","firstname","lastname","phone","locality","postalCode","streetNumber","streetName","country"]}}}},"UpdateUser":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"phone":{"type":"string"},"locality":{"type":"string"},"postalCode":{"type":"integer"},"streetNumber":{"type":"string"},"streetName":{"type":"string"},"country":{"type":"string"},"picture":{"type":"string"},"customer":{"type":"object","properties":{"searchWalker":{"type":"boolean"},"searchHost":{"type":"boolean"},"commune":{"type":"string"}},"required":["searchWalker","searchHost"]},"supplier":{"type":"object","properties":{"isHost":{"type":"boolean"},"isAnimalWalker":{"type":"boolean"},"slogan":{"type":"string"},"commune":{"type":"string"},"weightMax":{"type":"integer"}},"required":["isHost","isAnimalWalker"]}},"required":["email","password","firstname","lastname","phone","locality","postalCode","streetNumber","streetName","country"]}}}}},"schemas":{"Login":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}